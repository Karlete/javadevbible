<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apache Tomcat Overview - JavaDev Bible</title>
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/syntax-highlighting.css">
</head>
<body class="topic-page">
    <header class="topic-header">
        <div class="header-content">
            <nav class="breadcrumb">
                <a href="../../index.html">Home</a> / <a href="../../index.html#servers">Application Servers</a> / Tomcat Overview
            </nav>
            <h1>Apache Tomcat Overview</h1>
            <p class="topic-subtitle">The world's most popular Java servlet container</p>
            <a href="../../index.html" class="back-btn">&larr; Back to Index</a>
        </div>
    </header>

    <main class="topic-content">
        <section class="content-section">
            <h2>What is Apache Tomcat?</h2>
            <p><strong>Apache Tomcat</strong> is the world's most widely used Java servlet container and web server. It's an open-source implementation of the Jakarta Servlet, Jakarta Server Pages (JSP), and Jakarta WebSocket specifications, developed under the Apache Software Foundation.</p>

            <p>When people say they're "deploying to Tomcat," they mean they're using Tomcat as the runtime environment for their Java web applications. It's the "home" where your web app lives and runs.</p>

            <h3>Why Tomcat is So Popular</h3>
            <ul>
                <li><strong>Free and Open Source:</strong> Apache License 2.0, no cost, widely trusted</li>
                <li><strong>Reference Implementation:</strong> The standard by which other servlet containers are measured</li>
                <li><strong>Lightweight:</strong> Starts quickly, uses minimal resources compared to full application servers</li>
                <li><strong>Well Documented:</strong> Extensive documentation, huge community, countless tutorials</li>
                <li><strong>Production Proven:</strong> Powers millions of applications worldwide</li>
                <li><strong>Spring Boot Default:</strong> The default embedded server for Spring Boot applications</li>
                <li><strong>Easy to Learn:</strong> Simple directory structure and configuration</li>
            </ul>

            <div class="info-box">
                <p><strong>Quick Facts about Tomcat:</strong></p>
                <ul>
                    <li><strong>Created:</strong> 1999, originally by Sun Microsystems, donated to Apache</li>
                    <li><strong>Current Version:</strong> Tomcat 10.1.x (Jakarta EE 10), Tomcat 11 (Jakarta EE 11)</li>
                    <li><strong>Written In:</strong> Java (so it runs on any platform with JVM)</li>
                    <li><strong>Default Port:</strong> 8080 (HTTP), 8443 (HTTPS), 8005 (shutdown)</li>
                    <li><strong>Implements:</strong> Servlet 6.0, JSP 3.1, EL 5.0, WebSocket 2.1</li>
                </ul>
            </div>

            <h3>Tomcat Version History (What You Need to Know)</h3>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Tomcat Version</th>
                        <th>Java Version</th>
                        <th>Servlet Spec</th>
                        <th>Package Names</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Tomcat 8.5</td>
                        <td>Java 7+</td>
                        <td>Servlet 3.1</td>
                        <td>javax.servlet.*</td>
                    </tr>
                    <tr>
                        <td>Tomcat 9</td>
                        <td>Java 8+</td>
                        <td>Servlet 4.0</td>
                        <td>javax.servlet.*</td>
                    </tr>
                    <tr>
                        <td><strong>Tomcat 10</strong></td>
                        <td>Java 11+</td>
                        <td>Servlet 5.0/6.0</td>
                        <td><strong>jakarta.servlet.*</strong></td>
                    </tr>
                    <tr>
                        <td><strong>Tomcat 11</strong></td>
                        <td>Java 17+</td>
                        <td>Servlet 6.1</td>
                        <td><strong>jakarta.servlet.*</strong></td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box warning">
                <div class="info-box-title">Important: javax vs jakarta</div>
                <p>Tomcat 10+ uses <code>jakarta.servlet.*</code> package names instead of <code>javax.servlet.*</code>. This is due to Oracle transferring Java EE to the Eclipse Foundation. If your app uses <code>javax.servlet</code>, you need Tomcat 9 or earlier, OR you need to migrate your imports to <code>jakarta.servlet</code>.</p>
            </div>
        </section>

        <section class="content-section">
            <h2>Tomcat Directory Structure</h2>
            <p>Understanding Tomcat's directory layout is essential for configuration and troubleshooting. Here's what each folder contains:</p>

            <pre><code>apache-tomcat-10.1.x/
├── <span class="keyword">bin/</span>                 <span class="comment">← Startup/shutdown scripts</span>
│   ├── startup.sh       <span class="comment">   (Linux/Mac start)</span>
│   ├── startup.bat      <span class="comment">   (Windows start)</span>
│   ├── shutdown.sh      <span class="comment">   (Linux/Mac stop)</span>
│   ├── shutdown.bat     <span class="comment">   (Windows stop)</span>
│   ├── catalina.sh      <span class="comment">   (Main script with more options)</span>
│   └── setenv.sh        <span class="comment">   (YOUR custom JVM options - create this!)</span>
│
├── <span class="keyword">conf/</span>                <span class="comment">← Configuration files</span>
│   ├── server.xml       <span class="comment">   (Main server configuration)</span>
│   ├── web.xml          <span class="comment">   (Default web app settings)</span>
│   ├── context.xml      <span class="comment">   (Default context settings)</span>
│   ├── tomcat-users.xml <span class="comment">   (User accounts for manager)</span>
│   └── logging.properties <span class="comment">(Logging configuration)</span>
│
├── <span class="keyword">lib/</span>                 <span class="comment">← Tomcat's own JAR files + shared libraries</span>
│   ├── servlet-api.jar  <span class="comment">   (Servlet API)</span>
│   ├── jsp-api.jar      <span class="comment">   (JSP API)</span>
│   └── ...              <span class="comment">   (Tomcat implementation JARs)</span>
│
├── <span class="keyword">logs/</span>                <span class="comment">← Log files (check here for errors!)</span>
│   ├── catalina.out     <span class="comment">   (Main log - all console output)</span>
│   ├── catalina.YYYY-MM-DD.log <span class="comment">(Daily server logs)</span>
│   ├── localhost.YYYY-MM-DD.log <span class="comment">(Application logs)</span>
│   └── localhost_access.YYYY-MM-DD.log <span class="comment">(HTTP access logs)</span>
│
├── <span class="keyword">temp/</span>                <span class="comment">← Temporary files (can be cleared)</span>
│
├── <span class="keyword">webapps/</span>             <span class="comment">← YOUR APPLICATIONS GO HERE!</span>
│   ├── ROOT/            <span class="comment">   (Default app at http://localhost:8080/)</span>
│   ├── manager/         <span class="comment">   (Web-based management interface)</span>
│   ├── host-manager/    <span class="comment">   (Virtual host management)</span>
│   ├── examples/        <span class="comment">   (Example servlets - remove in production!)</span>
│   └── myapp.war        <span class="comment">   (Your app! Auto-deploys when dropped here)</span>
│
└── <span class="keyword">work/</span>                <span class="comment">← Compiled JSPs and session data</span>
    └── Catalina/        <span class="comment">   (Generated files - can be cleared)</span></code></pre>

            <h3>The Most Important Directories</h3>
            <ul>
                <li><strong>webapps/:</strong> Drop your WAR files here for automatic deployment. This is where your apps live.</li>
                <li><strong>conf/:</strong> All configuration. <code>server.xml</code> is the main file you'll edit.</li>
                <li><strong>logs/:</strong> First place to look when something goes wrong. <code>catalina.out</code> has everything.</li>
                <li><strong>bin/:</strong> Start and stop Tomcat from here.</li>
            </ul>
        </section>

        <section class="content-section">
            <h2>Installing and Running Tomcat</h2>

            <h3>Method 1: Download and Extract</h3>
            <pre><code><span class="comment"># 1. Download from https://tomcat.apache.org/</span>
<span class="comment"># 2. Extract the archive</span>

<span class="comment"># Linux/Mac:</span>
tar -xzf apache-tomcat-10.1.18.tar.gz
cd apache-tomcat-10.1.18

<span class="comment"># 3. Make scripts executable (Linux/Mac)</span>
chmod +x bin/*.sh

<span class="comment"># 4. Start Tomcat</span>
./bin/startup.sh
<span class="comment"># Or: ./bin/catalina.sh run (to see output in terminal)</span>

<span class="comment"># 5. Open browser: http://localhost:8080</span>
<span class="comment"># You should see the Tomcat welcome page!</span>

<span class="comment"># 6. Stop Tomcat</span>
./bin/shutdown.sh</code></pre>

            <h3>Method 2: Using Package Manager</h3>
            <pre><code><span class="comment"># Ubuntu/Debian</span>
sudo apt install tomcat10

<span class="comment"># macOS with Homebrew</span>
brew install tomcat

<span class="comment"># Windows with Chocolatey</span>
choco install tomcat</code></pre>

            <h3>Method 3: IDE Integration (Development)</h3>
            <pre><code><span class="comment">// IntelliJ IDEA:</span>
<span class="comment">// 1. Run → Edit Configurations</span>
<span class="comment">// 2. + → Tomcat Server → Local</span>
<span class="comment">// 3. Configure Tomcat Home directory</span>
<span class="comment">// 4. Add your artifact (WAR) to deploy</span>

<span class="comment">// Eclipse:</span>
<span class="comment">// 1. Window → Preferences → Server → Runtime Environments</span>
<span class="comment">// 2. Add → Apache Tomcat v10.1</span>
<span class="comment">// 3. Create new Server in Servers view</span></code></pre>

            <h3>Setting JVM Options</h3>
            <pre><code><span class="comment"># Create bin/setenv.sh (Linux/Mac) or bin/setenv.bat (Windows)</span>
<span class="comment"># This file is the RIGHT place for your custom settings</span>

<span class="comment"># bin/setenv.sh example:</span>
#!/bin/bash

<span class="comment"># Memory settings</span>
CATALINA_OPTS="$CATALINA_OPTS -Xms512m"      <span class="comment"># Initial heap</span>
CATALINA_OPTS="$CATALINA_OPTS -Xmx2048m"     <span class="comment"># Maximum heap</span>

<span class="comment"># Garbage collection (for Java 11+)</span>
CATALINA_OPTS="$CATALINA_OPTS -XX:+UseG1GC"

<span class="comment"># Remote debugging (development only!)</span>
CATALINA_OPTS="$CATALINA_OPTS -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005"

<span class="comment"># Application properties</span>
CATALINA_OPTS="$CATALINA_OPTS -Dspring.profiles.active=production"

export CATALINA_OPTS</code></pre>
        </section>

        <section class="content-section">
            <h2>Key Configuration Files</h2>

            <h3>server.xml - The Main Configuration</h3>
            <pre><code><span class="comment">&lt;!-- conf/server.xml - Core Tomcat configuration --&gt;</span>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;<span class="keyword">Server</span> port="8005" shutdown="SHUTDOWN"&gt;

    &lt;<span class="keyword">Service</span> name="Catalina"&gt;

        <span class="comment">&lt;!-- HTTP Connector - where requests come in --&gt;</span>
        &lt;<span class="keyword">Connector</span>
            port="8080"              <span class="comment">&lt;!-- Listen on this port --&gt;</span>
            protocol="HTTP/1.1"
            connectionTimeout="20000"
            maxThreads="200"         <span class="comment">&lt;!-- Max concurrent requests --&gt;</span>
            minSpareThreads="10"
            redirectPort="8443" /&gt;

        <span class="comment">&lt;!-- HTTPS Connector (uncomment and configure for SSL) --&gt;</span>
        &lt;!--
        &lt;Connector
            port="8443"
            protocol="org.apache.coyote.http11.Http11NioProtocol"
            maxThreads="150"
            SSLEnabled="true"&gt;
            &lt;SSLHostConfig&gt;
                &lt;Certificate
                    certificateKeystoreFile="conf/keystore.jks"
                    certificateKeystorePassword="changeit"
                    type="RSA" /&gt;
            &lt;/SSLHostConfig&gt;
        &lt;/Connector&gt;
        --&gt;

        <span class="comment">&lt;!-- Engine processes requests --&gt;</span>
        &lt;<span class="keyword">Engine</span> name="Catalina" defaultHost="localhost"&gt;

            <span class="comment">&lt;!-- Virtual host --&gt;</span>
            &lt;<span class="keyword">Host</span> name="localhost"
                  appBase="webapps"        <span class="comment">&lt;!-- Where apps are --&gt;</span>
                  unpackWARs="true"        <span class="comment">&lt;!-- Extract WAR files --&gt;</span>
                  autoDeploy="true"&gt;       <span class="comment">&lt;!-- Auto-deploy new WARs --&gt;</span>

                <span class="comment">&lt;!-- Access logging --&gt;</span>
                &lt;Valve className="org.apache.catalina.valves.AccessLogValve"
                       directory="logs"
                       prefix="localhost_access_log"
                       suffix=".txt"
                       pattern="%h %l %u %t &quot;%r&quot; %s %b" /&gt;
            &lt;/Host&gt;
        &lt;/Engine&gt;
    &lt;/Service&gt;
&lt;/Server&gt;</code></pre>

            <h3>tomcat-users.xml - User Authentication</h3>
            <pre><code><span class="comment">&lt;!-- conf/tomcat-users.xml - Users for Manager app --&gt;</span>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;tomcat-users&gt;
    <span class="comment">&lt;!-- Roles --&gt;</span>
    &lt;role rolename="manager-gui"/&gt;     <span class="comment">&lt;!-- Access manager web UI --&gt;</span>
    &lt;role rolename="manager-script"/&gt;  <span class="comment">&lt;!-- Deploy via script/API --&gt;</span>
    &lt;role rolename="admin-gui"/&gt;       <span class="comment">&lt;!-- Host manager web UI --&gt;</span>

    <span class="comment">&lt;!-- Users --&gt;</span>
    &lt;user username="admin"
          password="secretpassword"
          roles="manager-gui,manager-script,admin-gui"/&gt;
&lt;/tomcat-users&gt;

<span class="comment">&lt;!-- WARNING: Change the password in production!</span>
<span class="comment">     Consider using a more secure authentication mechanism --&gt;</span></code></pre>

            <h3>context.xml - Default Context Settings</h3>
            <pre><code><span class="comment">&lt;!-- conf/context.xml - Default settings for all web apps --&gt;</span>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;<span class="keyword">Context</span>&gt;

    <span class="comment">&lt;!-- Database connection pool (shared by all apps) --&gt;</span>
    &lt;<span class="keyword">Resource</span>
        name="jdbc/mydb"
        auth="Container"
        type="javax.sql.DataSource"
        driverClassName="org.postgresql.Driver"
        url="jdbc:postgresql://localhost:5432/mydb"
        username="dbuser"
        password="dbpassword"
        maxTotal="100"
        maxIdle="30"
        maxWaitMillis="10000"/&gt;

    <span class="comment">&lt;!-- Prevent session persistence across restarts --&gt;</span>
    &lt;Manager pathname="" /&gt;

    <span class="comment">&lt;!-- Watch web.xml for changes (development only) --&gt;</span>
    &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;

&lt;/Context&gt;</code></pre>
        </section>

        <section class="content-section">
            <h2>Deploying Applications to Tomcat</h2>

            <h3>Method 1: Drop WAR File (Simplest)</h3>
            <pre><code><span class="comment"># Just copy your WAR file to webapps/</span>
cp myapp.war /opt/tomcat/webapps/

<span class="comment"># Tomcat automatically:</span>
<span class="comment"># 1. Detects the new WAR file</span>
<span class="comment"># 2. Extracts it to webapps/myapp/</span>
<span class="comment"># 3. Deploys the application</span>
<span class="comment"># 4. Makes it available at http://localhost:8080/myapp</span>

<span class="comment"># To undeploy: delete the WAR and the extracted folder</span>
rm /opt/tomcat/webapps/myapp.war
rm -rf /opt/tomcat/webapps/myapp</code></pre>

            <h3>Method 2: Manager Web Interface</h3>
            <pre><code><span class="comment"># 1. Access: http://localhost:8080/manager/html</span>
<span class="comment"># 2. Login with credentials from tomcat-users.xml</span>
<span class="comment"># 3. Scroll to "WAR file to deploy"</span>
<span class="comment"># 4. Choose file and click "Deploy"</span>

<span class="comment"># Manager also lets you:</span>
<span class="comment"># - Start/Stop/Reload applications</span>
<span class="comment"># - Undeploy applications</span>
<span class="comment"># - View session statistics</span>
<span class="comment"># - Check server status</span></code></pre>

            <h3>Method 3: Maven Plugin</h3>
            <pre><code><span class="comment">&lt;!-- pom.xml - Tomcat Maven Plugin --&gt;</span>
&lt;plugin&gt;
    &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;
    &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.2&lt;/version&gt;
    &lt;configuration&gt;
        &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt;
        &lt;server&gt;tomcat-server&lt;/server&gt;  <span class="comment">&lt;!-- Reference to settings.xml --&gt;</span>
        &lt;path&gt;/myapp&lt;/path&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;

<span class="comment">&lt;!-- In ~/.m2/settings.xml --&gt;</span>
&lt;servers&gt;
    &lt;server&gt;
        &lt;id&gt;tomcat-server&lt;/id&gt;
        &lt;username&gt;admin&lt;/username&gt;
        &lt;password&gt;secretpassword&lt;/password&gt;
    &lt;/server&gt;
&lt;/servers&gt;

<span class="comment"># Deploy command:</span>
mvn tomcat7:deploy      <span class="comment"># First deployment</span>
mvn tomcat7:redeploy    <span class="comment"># Update existing</span>
mvn tomcat7:undeploy    <span class="comment"># Remove</span></code></pre>

            <h3>Understanding Context Paths</h3>
            <pre><code><span class="comment">// The WAR filename determines the context path (URL)</span>

myapp.war           → http://localhost:8080/myapp
myapp##2.war        → http://localhost:8080/myapp (version 2, parallel deploy)
ROOT.war            → http://localhost:8080/ (root context)
my#app.war          → http://localhost:8080/my/app (nested path)

<span class="comment">// Examples:</span>
webapps/
├── ROOT.war        <span class="comment">→ http://localhost:8080/</span>
├── api.war         <span class="comment">→ http://localhost:8080/api</span>
├── admin.war       <span class="comment">→ http://localhost:8080/admin</span>
└── v2#api.war      <span class="comment">→ http://localhost:8080/v2/api</span></code></pre>
        </section>

        <section class="content-section">
            <h2>Tomcat Architecture</h2>
            <p>Understanding Tomcat's internal architecture helps with configuration and troubleshooting:</p>

            <pre><code><span class="comment">// Tomcat Component Hierarchy</span>

┌─────────────────────────────────────────────────────────────────────┐
│                            SERVER                                    │
│  (Top-level container - one per Tomcat instance)                    │
│                                                                      │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │                         SERVICE                                │  │
│  │  (Groups Connectors with an Engine)                           │  │
│  │                                                                │  │
│  │  ┌─────────────┐  ┌─────────────┐                            │  │
│  │  │ CONNECTOR   │  │ CONNECTOR   │   (Multiple connectors)     │  │
│  │  │ (HTTP:8080) │  │ (HTTPS:8443)│   (HTTP, HTTPS, AJP)        │  │
│  │  └──────┬──────┘  └──────┬──────┘                            │  │
│  │         │                │                                    │  │
│  │         └────────┬───────┘                                    │  │
│  │                  │                                            │  │
│  │         ┌────────▼────────┐                                   │  │
│  │         │     ENGINE      │  (Request processing)             │  │
│  │         │   "Catalina"    │                                   │  │
│  │         └────────┬────────┘                                   │  │
│  │                  │                                            │  │
│  │         ┌────────▼────────┐                                   │  │
│  │         │      HOST       │  (Virtual host: localhost)        │  │
│  │         │  "localhost"    │  (Can have multiple hosts)        │  │
│  │         └────────┬────────┘                                   │  │
│  │                  │                                            │  │
│  │    ┌─────────────┼─────────────┐                             │  │
│  │    │             │             │                              │  │
│  │    ▼             ▼             ▼                              │  │
│  │ ┌──────┐    ┌──────┐    ┌──────┐                            │  │
│  │ │CONTXT│    │CONTXT│    │CONTXT│  (Your applications)        │  │
│  │ │/app1 │    │/app2 │    │ ROOT │                             │  │
│  │ └──────┘    └──────┘    └──────┘                            │  │
│  │                                                                │  │
│  └───────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘</code></pre>

            <h3>Component Descriptions</h3>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>Purpose</th>
                        <th>Configuration</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Server</strong></td>
                        <td>Top-level, represents entire Tomcat instance</td>
                        <td>server.xml (root element)</td>
                    </tr>
                    <tr>
                        <td><strong>Service</strong></td>
                        <td>Groups Connectors with one Engine</td>
                        <td>server.xml (&lt;Service&gt;)</td>
                    </tr>
                    <tr>
                        <td><strong>Connector</strong></td>
                        <td>Handles network connections (HTTP, HTTPS)</td>
                        <td>server.xml (&lt;Connector&gt;)</td>
                    </tr>
                    <tr>
                        <td><strong>Engine</strong></td>
                        <td>Processes requests, routes to correct Host</td>
                        <td>server.xml (&lt;Engine&gt;)</td>
                    </tr>
                    <tr>
                        <td><strong>Host</strong></td>
                        <td>Virtual host (domain handling)</td>
                        <td>server.xml (&lt;Host&gt;)</td>
                    </tr>
                    <tr>
                        <td><strong>Context</strong></td>
                        <td>Individual web application</td>
                        <td>context.xml, META-INF/context.xml</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="content-section">
            <h2>Troubleshooting Common Issues</h2>

            <h3>1. Tomcat Won't Start</h3>
            <pre><code><span class="comment"># Check if port is already in use</span>
lsof -i :8080           <span class="comment"># Linux/Mac</span>
netstat -ano | findstr 8080  <span class="comment"># Windows</span>

<span class="comment"># Check logs for errors</span>
tail -f logs/catalina.out

<span class="comment"># Common causes:</span>
<span class="comment"># - Another Tomcat or app using port 8080</span>
<span class="comment"># - JAVA_HOME not set</span>
<span class="comment"># - Insufficient permissions</span>
<span class="comment"># - Corrupted WAR file</span></code></pre>

            <h3>2. Application Not Loading</h3>
            <pre><code><span class="comment"># Check application-specific log</span>
tail -f logs/localhost.YYYY-MM-DD.log

<span class="comment"># Check if WAR was extracted</span>
ls -la webapps/

<span class="comment"># Common causes:</span>
<span class="comment"># - Missing dependencies in WEB-INF/lib</span>
<span class="comment"># - web.xml errors</span>
<span class="comment"># - Jakarta vs javax package mismatch (Tomcat 10+)</span>
<span class="comment"># - Database connection failures</span></code></pre>

            <h3>3. Out of Memory Errors</h3>
            <pre><code><span class="comment"># Increase heap size in setenv.sh</span>
CATALINA_OPTS="-Xms1024m -Xmx4096m"

<span class="comment"># Check for memory leaks</span>
<span class="comment"># Manager app → "Find leaks" button</span>

<span class="comment"># Enable heap dump on OOM</span>
CATALINA_OPTS="$CATALINA_OPTS -XX:+HeapDumpOnOutOfMemoryError"
CATALINA_OPTS="$CATALINA_OPTS -XX:HeapDumpPath=/opt/tomcat/logs/"</code></pre>

            <h3>4. Slow Performance</h3>
            <pre><code><span class="comment"># Increase thread pool</span>
&lt;Connector port="8080" maxThreads="500" /&gt;

<span class="comment"># Enable connection pooling for database</span>
<span class="comment"># Check slow queries in application</span>

<span class="comment"># Monitor with JMX</span>
CATALINA_OPTS="$CATALINA_OPTS -Dcom.sun.management.jmxremote"
CATALINA_OPTS="$CATALINA_OPTS -Dcom.sun.management.jmxremote.port=9090"</code></pre>
        </section>

        <section class="content-section">
            <h2>Production Best Practices</h2>

            <div class="best-practices">
                <h3>Security:</h3>
                <ul>
                    <li><strong>Remove default apps:</strong> Delete examples/, docs/, manager/ (or restrict access)</li>
                    <li><strong>Change shutdown port:</strong> Or disable it entirely</li>
                    <li><strong>Use HTTPS:</strong> Configure SSL/TLS connector</li>
                    <li><strong>Hide server info:</strong> Set <code>server="Apache"</code> in Connector</li>
                    <li><strong>Restrict manager access:</strong> IP-based restrictions in context.xml</li>
                </ul>

                <h3>Performance:</h3>
                <ul>
                    <li><strong>Tune thread pool:</strong> Match maxThreads to expected load</li>
                    <li><strong>Enable compression:</strong> Add <code>compression="on"</code> to Connector</li>
                    <li><strong>Use NIO connector:</strong> <code>protocol="org.apache.coyote.http11.Http11NioProtocol"</code></li>
                    <li><strong>Configure connection pooling:</strong> Proper min/max connections</li>
                </ul>

                <h3>Reliability:</h3>
                <ul>
                    <li><strong>Set up monitoring:</strong> JMX, metrics endpoint, health checks</li>
                    <li><strong>Configure logging:</strong> Log rotation, appropriate log levels</li>
                    <li><strong>Graceful shutdown:</strong> Use proper shutdown scripts</li>
                    <li><strong>Backup configurations:</strong> Version control your conf/ directory</li>
                </ul>
            </div>
        </section>

        <section class="content-section">
            <h2>Summary</h2>
            <div class="info-box">
                <ul>
                    <li><strong>Tomcat:</strong> World's most popular Java servlet container, open source, lightweight</li>
                    <li><strong>Directory Structure:</strong> webapps/ (apps), conf/ (config), logs/ (troubleshooting)</li>
                    <li><strong>Key Config Files:</strong> server.xml (main), tomcat-users.xml (auth), context.xml (resources)</li>
                    <li><strong>Deployment:</strong> Drop WAR in webapps/, use Manager, or Maven plugin</li>
                    <li><strong>Context Path:</strong> WAR filename determines URL (myapp.war → /myapp)</li>
                    <li><strong>Architecture:</strong> Server → Service → Connector + Engine → Host → Context</li>
                    <li><strong>Tomcat 10+:</strong> Uses jakarta.* packages (not javax.*)</li>
                </ul>
            </div>
        </section>

        <section class="related-topics">
            <h3>Related Topics</h3>
            <div class="related-links">
                <a href="app-server.html" class="related-link">What is an Application Server?</a>
                <a href="servlet-container.html" class="related-link">Servlet Containers</a>
                <a href="war-jar.html" class="related-link">WAR vs JAR</a>
                <a href="web-xml.html" class="related-link">Deployment Descriptors</a>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <p>&copy; 2026 JavaDev Bible</p>
    </footer>

    <script src="../../js/navigation.js"></script>
</body>
</html>
