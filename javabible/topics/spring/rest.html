<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring REST - JavaDev Bible</title>
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/syntax-highlighting.css">
</head>
<body class="topic-page">
    <header class="topic-header">
        <div class="header-content">
            <nav class="breadcrumb">
                <a href="../../index.html">Home</a> / <a href="../../index.html#spring">Spring Framework</a> / Spring REST
            </nav>
            <h1>Spring REST</h1>
            <p class="topic-subtitle">Building RESTful APIs with Spring</p>
            <a href="../../index.html" class="back-btn">&larr; Back to Index</a>
        </div>
    </header>

    <main class="topic-content">
        <section class="content-section">
            <h2>Building REST APIs</h2>

            <pre><code><span class="annotation">@RestController</span>
<span class="annotation">@RequestMapping</span>(<span class="string">"/api/users"</span>)
<span class="keyword">public class</span> <span class="class-name">UserController</span> {

    <span class="keyword">private final</span> <span class="class-name">UserService</span> userService;

    <span class="keyword">public</span> <span class="function">UserController</span>(<span class="class-name">UserService</span> userService) {
        <span class="keyword">this</span>.userService = userService;
    }

    <span class="comment">// GET /api/users</span>
    <span class="annotation">@GetMapping</span>
    <span class="keyword">public</span> <span class="class-name">List</span>&lt;<span class="class-name">UserDto</span>&gt; <span class="function">getAllUsers</span>() {
        <span class="keyword">return</span> userService.findAll();
    }

    <span class="comment">// GET /api/users/123</span>
    <span class="annotation">@GetMapping</span>(<span class="string">"/{id}"</span>)
    <span class="keyword">public</span> <span class="class-name">ResponseEntity</span>&lt;<span class="class-name">UserDto</span>&gt; <span class="function">getUser</span>(<span class="annotation">@PathVariable</span> <span class="class-name">Long</span> id) {
        <span class="keyword">return</span> userService.findById(id)
            .map(<span class="class-name">ResponseEntity</span>::ok)
            .orElse(<span class="class-name">ResponseEntity</span>.notFound().build());
    }

    <span class="comment">// POST /api/users</span>
    <span class="annotation">@PostMapping</span>
    <span class="keyword">public</span> <span class="class-name">ResponseEntity</span>&lt;<span class="class-name">UserDto</span>&gt; <span class="function">createUser</span>(<span class="annotation">@Valid</span> <span class="annotation">@RequestBody</span> <span class="class-name">CreateUserRequest</span> request) {
        <span class="class-name">UserDto</span> created = userService.create(request);
        <span class="class-name">URI</span> location = <span class="class-name">URI</span>.create(<span class="string">"/api/users/"</span> + created.getId());
        <span class="keyword">return</span> <span class="class-name">ResponseEntity</span>.created(location).body(created);
    }

    <span class="comment">// PUT /api/users/123</span>
    <span class="annotation">@PutMapping</span>(<span class="string">"/{id}"</span>)
    <span class="keyword">public</span> <span class="class-name">ResponseEntity</span>&lt;<span class="class-name">UserDto</span>&gt; <span class="function">updateUser</span>(
            <span class="annotation">@PathVariable</span> <span class="class-name">Long</span> id,
            <span class="annotation">@Valid</span> <span class="annotation">@RequestBody</span> <span class="class-name">UpdateUserRequest</span> request) {
        <span class="keyword">return</span> userService.update(id, request)
            .map(<span class="class-name">ResponseEntity</span>::ok)
            .orElse(<span class="class-name">ResponseEntity</span>.notFound().build());
    }

    <span class="comment">// DELETE /api/users/123</span>
    <span class="annotation">@DeleteMapping</span>(<span class="string">"/{id}"</span>)
    <span class="keyword">public</span> <span class="class-name">ResponseEntity</span>&lt;<span class="class-name">Void</span>&gt; <span class="function">deleteUser</span>(<span class="annotation">@PathVariable</span> <span class="class-name">Long</span> id) {
        userService.delete(id);
        <span class="keyword">return</span> <span class="class-name">ResponseEntity</span>.noContent().build();
    }
}</code></pre>
        </section>

        <section class="content-section">
            <h2>Request Validation</h2>

            <pre><code><span class="keyword">public class</span> <span class="class-name">CreateUserRequest</span> {

    <span class="annotation">@NotBlank</span>(message = <span class="string">"Name is required"</span>)
    <span class="annotation">@Size</span>(min = <span class="number">2</span>, max = <span class="number">50</span>)
    <span class="keyword">private</span> <span class="class-name">String</span> name;

    <span class="annotation">@NotBlank</span>
    <span class="annotation">@Email</span>(message = <span class="string">"Invalid email"</span>)
    <span class="keyword">private</span> <span class="class-name">String</span> email;

    <span class="annotation">@NotNull</span>
    <span class="annotation">@Min</span>(<span class="number">18</span>)
    <span class="annotation">@Max</span>(<span class="number">120</span>)
    <span class="keyword">private</span> <span class="class-name">Integer</span> age;

    <span class="comment">// getters/setters</span>
}

<span class="comment">// Global exception handler for validation errors</span>
<span class="annotation">@RestControllerAdvice</span>
<span class="keyword">public class</span> <span class="class-name">GlobalExceptionHandler</span> {

    <span class="annotation">@ExceptionHandler</span>(<span class="class-name">MethodArgumentNotValidException</span>.<span class="keyword">class</span>)
    <span class="annotation">@ResponseStatus</span>(HttpStatus.BAD_REQUEST)
    <span class="keyword">public</span> <span class="class-name">ErrorResponse</span> <span class="function">handleValidation</span>(<span class="class-name">MethodArgumentNotValidException</span> ex) {
        <span class="class-name">Map</span>&lt;<span class="class-name">String</span>, <span class="class-name">String</span>&gt; errors = <span class="keyword">new</span> <span class="class-name">HashMap</span>&lt;&gt;();
        ex.getBindingResult().getFieldErrors().forEach(error ->
            errors.put(error.getField(), error.getDefaultMessage())
        );
        <span class="keyword">return new</span> <span class="class-name">ErrorResponse</span>(<span class="string">"VALIDATION_ERROR"</span>, errors);
    }

    <span class="annotation">@ExceptionHandler</span>(<span class="class-name">ResourceNotFoundException</span>.<span class="keyword">class</span>)
    <span class="annotation">@ResponseStatus</span>(HttpStatus.NOT_FOUND)
    <span class="keyword">public</span> <span class="class-name">ErrorResponse</span> <span class="function">handleNotFound</span>(<span class="class-name">ResourceNotFoundException</span> ex) {
        <span class="keyword">return new</span> <span class="class-name">ErrorResponse</span>(<span class="string">"NOT_FOUND"</span>, ex.getMessage());
    }
}</code></pre>
        </section>

        <section class="content-section">
            <h2>Pagination</h2>

            <pre><code><span class="annotation">@GetMapping</span>
<span class="keyword">public</span> <span class="class-name">Page</span>&lt;<span class="class-name">UserDto</span>&gt; <span class="function">getUsers</span>(
        <span class="annotation">@RequestParam</span>(defaultValue = <span class="string">"0"</span>) <span class="keyword">int</span> page,
        <span class="annotation">@RequestParam</span>(defaultValue = <span class="string">"10"</span>) <span class="keyword">int</span> size,
        <span class="annotation">@RequestParam</span>(defaultValue = <span class="string">"id"</span>) <span class="class-name">String</span> sortBy) {

    <span class="class-name">Pageable</span> pageable = <span class="class-name">PageRequest</span>.of(page, size, <span class="class-name">Sort</span>.by(sortBy));
    <span class="keyword">return</span> userService.findAll(pageable);
}

<span class="comment">// Response includes: content, totalElements, totalPages, number, size</span></code></pre>
        </section>

        <section class="content-section">
            <h2>RestClient (Spring 6.1+)</h2>

            <pre><code><span class="annotation">@Service</span>
<span class="keyword">public class</span> <span class="class-name">ExternalApiService</span> {

    <span class="keyword">private final</span> <span class="class-name">RestClient</span> restClient;

    <span class="keyword">public</span> <span class="function">ExternalApiService</span>(<span class="class-name">RestClient.Builder</span> builder) {
        <span class="keyword">this</span>.restClient = builder
            .baseUrl(<span class="string">"https://api.example.com"</span>)
            .defaultHeader(<span class="string">"Authorization"</span>, <span class="string">"Bearer token"</span>)
            .build();
    }

    <span class="keyword">public</span> <span class="class-name">User</span> <span class="function">getUser</span>(<span class="class-name">Long</span> id) {
        <span class="keyword">return</span> restClient.get()
            .uri(<span class="string">"/users/{id}"</span>, id)
            .retrieve()
            .body(<span class="class-name">User</span>.<span class="keyword">class</span>);
    }

    <span class="keyword">public</span> <span class="class-name">User</span> <span class="function">createUser</span>(<span class="class-name">User</span> user) {
        <span class="keyword">return</span> restClient.post()
            .uri(<span class="string">"/users"</span>)
            .contentType(<span class="class-name">MediaType</span>.APPLICATION_JSON)
            .body(user)
            .retrieve()
            .body(<span class="class-name">User</span>.<span class="keyword">class</span>);
    }
}</code></pre>
        </section>

        <section class="content-section">
            <h2>Summary</h2>
            <div class="info-box">
                <ul>
                    <li><strong>@RestController:</strong> REST API controller</li>
                    <li><strong>@RequestBody:</strong> JSON request body</li>
                    <li><strong>@Valid:</strong> Validates request body</li>
                    <li><strong>ResponseEntity:</strong> Full response control</li>
                    <li><strong>@RestControllerAdvice:</strong> Global exception handling</li>
                    <li><strong>RestClient:</strong> Modern HTTP client (Spring 6.1+)</li>
                </ul>
            </div>
        </section>

        <section class="related-topics">
            <h3>Related Topics</h3>
            <div class="related-links">
                <a href="mvc.html" class="related-link">Spring MVC</a>
                <a href="boot.html" class="related-link">Spring Boot</a>
                <a href="security.html" class="related-link">Spring Security</a>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <p>&copy; 2026 JavaDev Bible</p>
    </footer>

    <script src="../../js/navigation.js"></script>
</body>
</html>
