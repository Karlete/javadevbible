<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bean Validation - JavaDev Bible</title>
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/syntax-highlighting.css">
</head>
<body class="topic-page">
    <header class="topic-header">
        <div class="header-content">
            <nav class="breadcrumb">
                <a href="../../index.html">Home</a> / <a href="../../index.html#jakarta-ee">Jakarta EE</a> / Bean Validation
            </nav>
            <h1>Bean Validation</h1>
            <p class="topic-subtitle">Validating Data with Annotations</p>
            <a href="../../index.html" class="back-btn">‚Üê Back to Index</a>
        </div>
    </header>

    <main class="topic-content">
        <section class="content-section">
            <h2>What is Bean Validation?</h2>
            <p><strong>Think of Bean Validation like airport security checks:</strong></p>
            <ul>
                <li>‚úàÔ∏è Data enters your application (passengers boarding)</li>
                <li>üîç Validation checks the data (security screening)</li>
                <li>‚ùå Invalid data is rejected (denied boarding)</li>
                <li>‚úÖ Valid data proceeds (cleared for flight)</li>
            </ul>

            <div class="info-box">
                <p><strong>Bean Validation</strong> allows you to define validation rules on your Java objects using annotations. No manual if-else checks needed!</p>
                <p><strong>Reference implementation:</strong> Hibernate Validator</p>
            </div>

            <h3>Without Bean Validation (Manual Checks)</h3>
            <pre><code><span class="keyword">public void</span> <span class="function">registerUser</span>(<span class="class-name">User</span> user) {
    <span class="keyword">if</span> (user.getUsername() == <span class="keyword">null</span> || user.getUsername().isEmpty()) {
        <span class="keyword">throw new</span> <span class="class-name">IllegalArgumentException</span>(<span class="string">"Username required"</span>);
    }
    <span class="keyword">if</span> (user.getUsername().length() < <span class="number">3</span>) {
        <span class="keyword">throw new</span> <span class="class-name">IllegalArgumentException</span>(<span class="string">"Username too short"</span>);
    }
    <span class="keyword">if</span> (user.getEmail() == <span class="keyword">null</span> || !user.getEmail().contains(<span class="string">"@"</span>)) {
        <span class="keyword">throw new</span> <span class="class-name">IllegalArgumentException</span>(<span class="string">"Invalid email"</span>);
    }
    <span class="keyword">if</span> (user.getAge() < <span class="number">18</span>) {
        <span class="keyword">throw new</span> <span class="class-name">IllegalArgumentException</span>(<span class="string">"Must be 18+"</span>);
    }
    <span class="comment">// So much boilerplate!</span>
}</code></pre>

            <h3>With Bean Validation (Clean!)</h3>
            <pre><code><span class="keyword">public class</span> <span class="class-name">User</span> {
    <span class="annotation">@NotBlank</span>(message = <span class="string">"Username required"</span>)
    <span class="annotation">@Size</span>(min = <span class="number">3</span>, max = <span class="number">50</span>)
    <span class="keyword">private</span> <span class="class-name">String</span> username;

    <span class="annotation">@Email</span>
    <span class="annotation">@NotNull</span>
    <span class="keyword">private</span> <span class="class-name">String</span> email;

    <span class="annotation">@Min</span>(<span class="number">18</span>)
    <span class="keyword">private int</span> age;
}

<span class="comment">// Validation happens automatically!</span></code></pre>
        </section>

        <section class="content-section">
            <h2>Built-In Validation Constraints</h2>

            <h3>Null/Empty Checks</h3>
            <pre><code><span class="keyword">public class</span> <span class="class-name">Person</span> {
    <span class="annotation">@NotNull</span>  <span class="comment">// Must not be null</span>
    <span class="keyword">private</span> <span class="class-name">String</span> firstName;

    <span class="annotation">@NotBlank</span>  <span class="comment">// Not null, not empty, not just whitespace</span>
    <span class="keyword">private</span> <span class="class-name">String</span> lastName;

    <span class="annotation">@NotEmpty</span>  <span class="comment">// Not null and size > 0</span>
    <span class="keyword">private</span> <span class="class-name">List</span>&lt;<span class="class-name">String</span>&gt; hobbies;

    <span class="annotation">@Null</span>  <span class="comment">// Must be null (rare, for conditional validation)</span>
    <span class="keyword">private</span> <span class="class-name">String</span> internalField;
}</code></pre>

            <h3>Size/Range Constraints</h3>
            <pre><code><span class="keyword">public class</span> <span class="class-name">Product</span> {
    <span class="annotation">@Size</span>(min = <span class="number">5</span>, max = <span class="number">100</span>)  <span class="comment">// String length or collection size</span>
    <span class="keyword">private</span> <span class="class-name">String</span> name;

    <span class="annotation">@Min</span>(<span class="number">0</span>)  <span class="comment">// Minimum value</span>
    <span class="annotation">@Max</span>(<span class="number">1000</span>)  <span class="comment">// Maximum value</span>
    <span class="keyword">private</span> <span class="keyword">double</span> price;

    <span class="annotation">@DecimalMin</span>(<span class="string">"0.0"</span>)  <span class="comment">// For BigDecimal</span>
    <span class="annotation">@DecimalMax</span>(<span class="string">"999.99"</span>)
    <span class="keyword">private</span> <span class="class-name">BigDecimal</span> discount;

    <span class="annotation">@Positive</span>  <span class="comment">// > 0</span>
    <span class="keyword">private int</span> quantity;

    <span class="annotation">@PositiveOrZero</span>  <span class="comment">// >= 0</span>
    <span class="keyword">private int</span> stock;

    <span class="annotation">@Negative</span>  <span class="comment">// < 0</span>
    <span class="keyword">private int</span> deficit;
}</code></pre>

            <h3>Pattern/Format Constraints</h3>
            <pre><code><span class="keyword">public class</span> <span class="class-name">Contact</span> {
    <span class="annotation">@Email</span>  <span class="comment">// Valid email format</span>
    <span class="keyword">private</span> <span class="class-name">String</span> email;

    <span class="annotation">@Pattern</span>(regexp = <span class="string">"^\\d{3}-\\d{3}-\\d{4}$"</span>,
             message = <span class="string">"Phone must be in format XXX-XXX-XXXX"</span>)
    <span class="keyword">private</span> <span class="class-name">String</span> phone;

    <span class="annotation">@Pattern</span>(regexp = <span class="string">"^[A-Z]{2}\\d{6}$"</span>)  <span class="comment">// Passport format</span>
    <span class="keyword">private</span> <span class="class-name">String</span> passport;
}</code></pre>

            <h3>Date/Time Constraints</h3>
            <pre><code><span class="keyword">public class</span> <span class="class-name">Event</span> {
    <span class="annotation">@Past</span>  <span class="comment">// Must be in the past</span>
    <span class="keyword">private</span> <span class="class-name">LocalDate</span> birthDate;

    <span class="annotation">@PastOrPresent</span>  <span class="comment">// Past or today</span>
    <span class="keyword">private</span> <span class="class-name">LocalDate</span> registrationDate;

    <span class="annotation">@Future</span>  <span class="comment">// Must be in the future</span>
    <span class="keyword">private</span> <span class="class-name">LocalDate</span> eventDate;

    <span class="annotation">@FutureOrPresent</span>  <span class="comment">// Future or today</span>
    <span class="keyword">private</span> <span class="class-name">LocalDate</span> deadline;
}</code></pre>

            <h3>Boolean Constraints</h3>
            <pre><code><span class="keyword">public class</span> <span class="class-name">Agreement</span> {
    <span class="annotation">@AssertTrue</span>  <span class="comment">// Must be true</span>
    <span class="keyword">private</span> <span class="keyword">boolean</span> termsAccepted;

    <span class="annotation">@AssertFalse</span>  <span class="comment">// Must be false</span>
    <span class="keyword">private</span> <span class="keyword">boolean</span> fraudulent;
}</code></pre>
        </section>

        <section class="content-section">
            <h2>Validating Objects</h2>

            <h3>Manual Validation</h3>
            <pre><code><span class="keyword">import</span> jakarta.validation.*;
<span class="keyword">import</span> java.util.*;

<span class="keyword">public class</span> <span class="class-name">ValidationExample</span> {
    <span class="keyword">public static void</span> <span class="function">main</span>(<span class="class-name">String</span>[] args) {
        <span class="comment">// Get validator instance</span>
        <span class="class-name">ValidatorFactory</span> factory = <span class="class-name">Validation</span>.buildDefaultValidatorFactory();
        <span class="class-name">Validator</span> validator = factory.getValidator();

        <span class="comment">// Create object with invalid data</span>
        <span class="class-name">User</span> user = <span class="keyword">new</span> <span class="class-name">User</span>();
        user.setUsername(<span class="string">"ab"</span>);  <span class="comment">// Too short!</span>
        user.setEmail(<span class="string">"invalid"</span>);  <span class="comment">// Invalid email!</span>
        user.setAge(<span class="number">15</span>);  <span class="comment">// Too young!</span>

        <span class="comment">// Validate</span>
        <span class="class-name">Set</span>&lt;<span class="class-name">ConstraintViolation</span>&lt;<span class="class-name">User</span>&gt;&gt; violations = validator.validate(user);

        <span class="comment">// Check violations</span>
        <span class="keyword">if</span> (!violations.isEmpty()) {
            <span class="keyword">for</span> (<span class="class-name">ConstraintViolation</span>&lt;<span class="class-name">User</span>&gt; violation : violations) {
                <span class="class-name">System</span>.out.println(violation.getPropertyPath() + <span class="string">": "</span> +
                                   violation.getMessage());
            }
        }
    }
}</code></pre>

            <p><strong>Output:</strong></p>
            <pre><code>username: size must be between 3 and 50
email: must be a well-formed email address
age: must be greater than or equal to 18</code></pre>

            <h3>Automatic Validation in Jakarta EE</h3>
            <pre><code><span class="annotation">@Path</span>(<span class="string">"/users"</span>)
<span class="keyword">public class</span> <span class="class-name">UserResource</span> {

    <span class="annotation">@POST</span>
    <span class="annotation">@Consumes</span>(MediaType.APPLICATION_JSON)
    <span class="keyword">public</span> <span class="class-name">Response</span> <span class="function">createUser</span>(<span class="annotation">@Valid</span> <span class="class-name">User</span> user) {  <span class="comment">// @Valid triggers validation!</span>
        <span class="comment">// If validation fails, ConstraintViolationException is thrown</span>
        <span class="comment">// If valid, continues here</span>
        userService.save(user);
        <span class="keyword">return</span> <span class="class-name">Response</span>.ok().build();
    }
}</code></pre>
        </section>

        <section class="content-section">
            <h2>Nested Validation</h2>

            <pre><code><span class="keyword">public class</span> <span class="class-name">Order</span> {
    <span class="annotation">@NotNull</span>
    <span class="annotation">@Size</span>(min = <span class="number">1</span>)
    <span class="annotation">@Valid</span>  <span class="comment">// Cascade validation to items!</span>
    <span class="keyword">private</span> <span class="class-name">List</span>&lt;<span class="class-name">OrderItem</span>&gt; items;

    <span class="annotation">@NotNull</span>
    <span class="annotation">@Valid</span>  <span class="comment">// Validate address too</span>
    <span class="keyword">private</span> <span class="class-name">Address</span> shippingAddress;
}

<span class="keyword">public class</span> <span class="class-name">OrderItem</span> {
    <span class="annotation">@NotNull</span>
    <span class="keyword">private</span> <span class="class-name">String</span> productName;

    <span class="annotation">@Min</span>(<span class="number">1</span>)
    <span class="keyword">private int</span> quantity;

    <span class="annotation">@Positive</span>
    <span class="keyword">private</span> <span class="keyword">double</span> price;
}

<span class="keyword">public class</span> <span class="class-name">Address</span> {
    <span class="annotation">@NotBlank</span>
    <span class="keyword">private</span> <span class="class-name">String</span> street;

    <span class="annotation">@NotBlank</span>
    <span class="keyword">private</span> <span class="class-name">String</span> city;

    <span class="annotation">@Pattern</span>(regexp = <span class="string">"^\\d{5}$"</span>)
    <span class="keyword">private</span> <span class="class-name">String</span> zipCode;
}

<span class="comment">// Validates Order, all OrderItems, and Address!</span></code></pre>
        </section>

        <section class="content-section">
            <h2>Custom Validation Constraints</h2>

            <h3>1. Define the Annotation</h3>
            <pre><code><span class="keyword">import</span> jakarta.validation.*;
<span class="keyword">import</span> java.lang.annotation.*;

<span class="annotation">@Target</span>({ElementType.FIELD, ElementType.PARAMETER})
<span class="annotation">@Retention</span>(RetentionPolicy.RUNTIME)
<span class="annotation">@Constraint</span>(validatedBy = StrongPasswordValidator.<span class="keyword">class</span>)
<span class="keyword">public</span> <span class="annotation">@interface</span> <span class="class-name">StrongPassword</span> {
    <span class="class-name">String</span> message() <span class="keyword">default</span> <span class="string">"Password must be strong"</span>;
    <span class="class-name">Class</span>&lt;?&gt;[] groups() <span class="keyword">default</span> {};
    <span class="class-name">Class</span>&lt;? <span class="keyword">extends</span> Payload&gt;[] payload() <span class="keyword">default</span> {};
}</code></pre>

            <h3>2. Create the Validator</h3>
            <pre><code><span class="keyword">import</span> jakarta.validation.*;

<span class="keyword">public class</span> <span class="class-name">StrongPasswordValidator</span>
    <span class="keyword">implements</span> <span class="class-name">ConstraintValidator</span>&lt;<span class="class-name">StrongPassword</span>, <span class="class-name">String</span>&gt; {

    <span class="annotation">@Override</span>
    <span class="keyword">public boolean</span> <span class="function">isValid</span>(<span class="class-name">String</span> password, <span class="class-name">ConstraintValidatorContext</span> context) {
        <span class="keyword">if</span> (password == <span class="keyword">null</span>) {
            <span class="keyword">return</span> <span class="keyword">false</span>;
        }

        <span class="comment">// Must be at least 8 characters</span>
        <span class="keyword">if</span> (password.length() < <span class="number">8</span>) {
            <span class="keyword">return</span> <span class="keyword">false</span>;
        }

        <span class="comment">// Must contain uppercase, lowercase, digit, special char</span>
        <span class="keyword">boolean</span> hasUppercase = password.matches(<span class="string">".*[A-Z].*"</span>);
        <span class="keyword">boolean</span> hasLowercase = password.matches(<span class="string">".*[a-z].*"</span>);
        <span class="keyword">boolean</span> hasDigit = password.matches(<span class="string">".*\\d.*"</span>);
        <span class="keyword">boolean</span> hasSpecial = password.matches(<span class="string">".*[!@#$%^&*].*"</span>);

        <span class="keyword">return</span> hasUppercase && hasLowercase && hasDigit && hasSpecial;
    }
}</code></pre>

            <h3>3. Use It</h3>
            <pre><code><span class="keyword">public class</span> <span class="class-name">User</span> {
    <span class="annotation">@NotBlank</span>
    <span class="keyword">private</span> <span class="class-name">String</span> username;

    <span class="annotation">@StrongPassword</span>  <span class="comment">// Custom constraint!</span>
    <span class="keyword">private</span> <span class="class-name">String</span> password;
}</code></pre>
        </section>

        <section class="content-section">
            <h2>Validation Groups</h2>
            <p><strong>Apply different validation rules in different scenarios</strong></p>

            <pre><code><span class="comment">// Define group interfaces</span>
<span class="keyword">public interface</span> <span class="class-name">Create</span> { }
<span class="keyword">public interface</span> <span class="class-name">Update</span> { }

<span class="keyword">public class</span> <span class="class-name">User</span> {
    <span class="annotation">@Null</span>(groups = Create.<span class="keyword">class</span>)  <span class="comment">// ID must be null when creating</span>
    <span class="annotation">@NotNull</span>(groups = Update.<span class="keyword">class</span>)  <span class="comment">// ID required when updating</span>
    <span class="keyword">private</span> <span class="class-name">Long</span> id;

    <span class="annotation">@NotBlank</span>  <span class="comment">// Always required (default group)</span>
    <span class="keyword">private</span> <span class="class-name">String</span> username;

    <span class="annotation">@NotNull</span>(groups = Create.<span class="keyword">class</span>)  <span class="comment">// Password required on create</span>
    <span class="keyword">private</span> <span class="class-name">String</span> password;
}

<span class="comment">// Validate with specific group</span>
<span class="class-name">Set</span>&lt;<span class="class-name">ConstraintViolation</span>&lt;<span class="class-name">User</span>&gt;&gt; violations =
    validator.validate(user, Create.<span class="keyword">class</span>);  <span class="comment">// Validate for creation</span></code></pre>

            <h3>In REST APIs</h3>
            <pre><code><span class="annotation">@Path</span>(<span class="string">"/users"</span>)
<span class="keyword">public class</span> <span class="class-name">UserResource</span> {

    <span class="annotation">@POST</span>
    <span class="keyword">public</span> <span class="class-name">Response</span> <span class="function">create</span>(<span class="annotation">@Valid</span> <span class="annotation">@ConvertGroup</span>(to = Create.<span class="keyword">class</span>) <span class="class-name">User</span> user) {
        <span class="comment">// Validates using Create group</span>
        <span class="keyword">return</span> <span class="class-name">Response</span>.ok().build();
    }

    <span class="annotation">@PUT</span>
    <span class="annotation">@Path</span>(<span class="string">"/{id}"</span>)
    <span class="keyword">public</span> <span class="class-name">Response</span> <span class="function">update</span>(<span class="annotation">@Valid</span> <span class="annotation">@ConvertGroup</span>(to = Update.<span class="keyword">class</span>) <span class="class-name">User</span> user) {
        <span class="comment">// Validates using Update group</span>
        <span class="keyword">return</span> <span class="class-name">Response</span>.ok().build();
    }
}</code></pre>
        </section>

        <section class="content-section">
            <h2>Method Validation</h2>

            <pre><code><span class="annotation">@ApplicationScoped</span>
<span class="annotation">@Validated</span>  <span class="comment">// Enable method validation</span>
<span class="keyword">public class</span> <span class="class-name">UserService</span> {

    <span class="comment">// Validate parameters</span>
    <span class="keyword">public void</span> <span class="function">createUser</span>(<span class="annotation">@Valid</span> <span class="annotation">@NotNull</span> <span class="class-name">User</span> user) {
        <span class="comment">// user is validated before method executes</span>
    }

    <span class="comment">// Validate individual parameters</span>
    <span class="keyword">public</span> <span class="class-name">User</span> <span class="function">findByEmail</span>(<span class="annotation">@Email</span> <span class="annotation">@NotBlank</span> <span class="class-name">String</span> email) {
        <span class="comment">// email is validated</span>
        <span class="keyword">return</span> <span class="keyword">null</span>;
    }

    <span class="comment">// Validate return value</span>
    <span class="annotation">@NotNull</span>
    <span class="keyword">public</span> <span class="class-name">User</span> <span class="function">getCurrentUser</span>() {
        <span class="comment">// Must return non-null User</span>
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="class-name">User</span>();
    }
}</code></pre>
        </section>

        <section class="content-section">
            <h2>Custom Error Messages</h2>

            <h3>Inline Messages</h3>
            <pre><code><span class="keyword">public class</span> <span class="class-name">Product</span> {
    <span class="annotation">@NotBlank</span>(message = <span class="string">"Product name is required"</span>)
    <span class="keyword">private</span> <span class="class-name">String</span> name;

    <span class="annotation">@Min</span>(value = <span class="number">0</span>, message = <span class="string">"Price must be positive"</span>)
    <span class="keyword">private</span> <span class="keyword">double</span> price;

    <span class="annotation">@Size</span>(min = <span class="number">10</span>, max = <span class="number">500</span>,
          message = <span class="string">"Description must be between {min} and {max} characters"</span>)
    <span class="keyword">private</span> <span class="class-name">String</span> description;
}</code></pre>

            <h3>Internationalization (i18n)</h3>
            <pre><code><span class="comment">// ValidationMessages.properties</span>
product.name.required=Product name is required
product.price.positive=Price must be at least ${value}

<span class="comment">// Use in code</span>
<span class="annotation">@NotBlank</span>(message = <span class="string">"{product.name.required}"</span>)
<span class="keyword">private</span> <span class="class-name">String</span> name;

<span class="annotation">@Min</span>(value = <span class="number">0</span>, message = <span class="string">"{product.price.positive}"</span>)
<span class="keyword">private</span> <span class="keyword">double</span> price;</code></pre>
        </section>

        <section class="content-section">
            <h2>Best Practices</h2>

            <div class="best-practices">
                <h3>‚úÖ DO:</h3>
                <ul>
                    <li><strong>Use @Valid for nested objects</strong> - Cascade validation</li>
                    <li><strong>Provide clear error messages</strong> - Users need to understand what's wrong</li>
                    <li><strong>Validate at boundaries</strong> - REST endpoints, form submissions</li>
                    <li><strong>Use groups for different scenarios</strong> - Create vs Update</li>
                    <li><strong>Combine multiple constraints</strong> - @NotNull + @Size + @Pattern</li>
                    <li><strong>Create custom validators for complex rules</strong> - Reusable logic</li>
                    <li><strong>Validate method parameters</strong> - Protect service layer</li>
                </ul>

                <h3>‚ùå DON'T:</h3>
                <ul>
                    <li><strong>Don't skip validation on updates</strong> - Always validate</li>
                    <li><strong>Don't validate too late</strong> - Fail fast at entry points</li>
                    <li><strong>Don't mix validation and business logic</strong> - Keep separate</li>
                    <li><strong>Don't use generic messages</strong> - Be specific</li>
                    <li><strong>Don't forget @Valid on nested objects</strong> - Won't validate otherwise</li>
                    <li><strong>Don't overuse custom validators</strong> - Use built-in when possible</li>
                </ul>
            </div>
        </section>

        <section class="content-section">
            <h2>Summary</h2>
            <div class="info-box">
                <ul>
                    <li><strong>Bean Validation</strong> validates data using annotations</li>
                    <li><strong>Built-in constraints:</strong> @NotNull, @NotBlank, @Size, @Email, @Min, @Max, @Pattern</li>
                    <li><strong>@Valid:</strong> Triggers validation (REST endpoints, nested objects)</li>
                    <li><strong>Custom constraints:</strong> Create your own validation annotations</li>
                    <li><strong>Validation groups:</strong> Different rules for different scenarios</li>
                    <li><strong>Method validation:</strong> Validate parameters and return values</li>
                    <li><strong>Nested validation:</strong> Cascade validation with @Valid</li>
                    <li><strong>Automatic in Jakarta EE:</strong> Works with JAX-RS, JPA, CDI</li>
                    <li><strong>Benefits:</strong> Declarative, reusable, consistent validation</li>
                    <li><strong>Implementation:</strong> Hibernate Validator (reference implementation)</li>
                </ul>
            </div>
        </section>

        <section class="related-topics">
            <h3>Related Topics</h3>
            <div class="related-links">
                <a href="jpa.html" class="related-link">JPA (Persistence)</a>
                <a href="jax-rs.html" class="related-link">JAX-RS (REST APIs)</a>
                <a href="cdi.html" class="related-link">CDI (Dependency Injection)</a>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <p>&copy; 2026 JavaDev Bible</p>
    </footer>

    <script src="../../js/navigation.js"></script>
</body>
</html>